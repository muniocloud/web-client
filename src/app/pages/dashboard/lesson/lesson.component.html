<mat-progress-bar mode="indeterminate" class="submitting-progress-bar" *ngIf="isSubmitting"></mat-progress-bar>
<mat-progress-spinner *ngIf="isLoading" mode="indeterminate"></mat-progress-spinner>

<app-page-error *ngIf="pageError" [errorMessage]="pageError" />

<div *ngIf="!isLoading && !pageError" class="lesson-container">
  <app-session-progress [lessonsStatus]="lessonsStatus" [currentLessonId]="lessonId" [sessionId]="sessionId" class="session-progress" />

  <ng-content *ngIf="(feedback | async) as feedback; else lessonBlock">
    <app-lesson-result [feedback]="feedback" [phrase]="phrase" [recordedData]="recordedData!" (onContinue)="nextLesson()" (onRetry)="retryLesson()"/>
  </ng-content>
  
  <ng-template #lessonBlock>
    <app-lesson-view (onRecordAudio)="answerLesson($event)" [phrase]="phrase" />
  </ng-template>
</div>